<div class="container my-5">

  <h1 class="text-center mb-4 text-primary">angular-ai-llm</h1>

  <div class="row g-3 align-items-center mb-4">
    <div class="col-12 col-md-4">
      <label class="form-label">Nom du réalisateur</label>
      @if (useMock) {
      <input type="text" class="form-control text-start" [(ngModel)]="name" readonly>
      } @else {
      <input type="text" class="form-control text-start" [(ngModel)]="name">
      }
    </div>

    <div class="col-12 col-md-4">
      <label class="form-label">Style de réponse</label>
      <select class="form-select" [(ngModel)]="style" (ngModelChange)="onStyleChange($event)">
        <option value="neutral">Neutre</option>
        <option value="casual">Décontracté</option>
        <option value="technical">Technique</option>
        <option value="narrative">Narratif</option>
        <option value="press">Journalistique</option>
      </select>
    </div>

    <div class="col-12 col-md-4">
      <label class="form-label">Longueur</label>
      <select class="form-select" [(ngModel)]="length" (ngModelChange)="onLengthChange($event)">
        <option value="short">Courte</option>
        <option value="medium">Moyenne</option>
        <option value="long">Longue</option>
      </select>
    </div>
  </div>

  <div class="row g-4 mb-3">

    <div class="col-12 col-md-6">
      <div class="d-flex align-items-center gap-2 mb-2 btn-group-responsive">
        <button class="btn btn-primary" (click)="loadBiography('chatgpt')">Biographie - ChatGPT</button>
        <button class="btn btn-outline-secondary" (click)="biographyChatGPT = ''">Réinitialiser</button>
        @if (biographyChatGPT && !chatgptLoading) {
        <span class="badge bg-primary">✓</span>
        }
        @if (chatgptDuration > 0) {
        <span class="text-muted ms-auto small-text">
          Réponse en {{ chatgptDuration.toFixed(1) }}s
        </span>
        }
      </div>
      <div class="position-relative">
        <textarea class="form-control" [value]="biographyChatGPT" readonly rows="6"></textarea>
        @if (chatgptLoading) {
        <div class="loading">
          <div class="spinner-border text-primary" role="status" style="width: 1.5rem; height: 1.5rem;">
            <span class="visually-hidden">Chargement...</span>
          </div>
        </div>
        }
      </div>
    </div>

    <div class="col-12 col-md-6">
      <div class="d-flex align-items-center gap-2 mb-2 btn-group-responsive">
        <button class="btn btn-success" (click)="loadBiography('claude')">Biographie - Claude</button>
        <button class="btn btn-outline-secondary" (click)="biographyClaude = ''">Réinitialiser</button>
        @if (biographyClaude && !claudeLoading) {
        <span class="badge bg-success">✓</span>
        }
        @if (claudeDuration > 0) {
        <span class="text-muted ms-auto small-text">
          Réponse en {{ claudeDuration.toFixed(1) }}s
        </span>
        }
      </div>
      <div class="position-relative">
        <textarea class="form-control" [value]="biographyClaude" readonly rows="6"></textarea>
        @if (claudeLoading) {
        <div class="loading">
          <div class="spinner-border text-success" role="status" style="width: 1.5rem; height: 1.5rem;">
            <span class="visually-hidden">Chargement...</span>
          </div>
        </div>
        }
      </div>
    </div>

  </div>

</div>